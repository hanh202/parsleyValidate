'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _commander = require('commander');

var _commander2 = _interopRequireDefault(_commander);

var _run = require('./helpers/run');

var _run2 = _interopRequireDefault(_run);

var _resolve = require('./tasks/resolve');

var _resolve2 = _interopRequireDefault(_resolve);

var _generic = require('./tasks/generic');

var _generic2 = _interopRequireDefault(_generic);

var _install = require('./tasks/install');

var _install2 = _interopRequireDefault(_install);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _require = require(_path2.default.join(__dirname, '../package.json')),
    version = _require.version;

var task = process.argv[2] !== 'resolve' && process.argv[2] !== 'install' ? process.argv[2] : null;

_commander2.default.version(version);

_commander2.default.command('resolve').action(function () {
  return (0, _run2.default)(_resolve2.default);
});

_commander2.default.command('install').action(function () {
  return (0, _run2.default)(_install2.default);
});

if (task) {
  _commander2.default.command(task).action(function () {
    return (0, _run2.default)(_generic2.default, { task: task });
  });
}

_commander2.default.command('*').action(function () {
  throw new Error('Unknown Cleave task. See all available commands in the documentation: ' + 'https://github.com/mapleinside/cleave#commands');
});

_commander2.default.parse(process.argv);